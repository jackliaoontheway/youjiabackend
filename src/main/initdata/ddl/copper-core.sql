DROP DATABASE IF EXISTS `dbcoppercore`;
CREATE DATABASE `dbcoppercore`;
USE `dbcoppercore`;

-- DUMPING STRUCTURE FOR TABLE COPPERDEMO.COP_ADAPTERCALL
DROP TABLE IF EXISTS `COP_ADAPTERCALL`;
CREATE TABLE IF NOT EXISTS `COP_ADAPTERCALL` (
  `WORKFLOWID` VARCHAR(128) NOT NULL,
  `ENTITYID` VARCHAR(128) NOT NULL,
  `ADAPTERID` VARCHAR(128) NOT NULL,
  `PRIORITY` BIGINT(20) NOT NULL,
  `DEFUNCT` CHAR(1) NOT NULL DEFAULT '0',
  `DEQUEUE_TS` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `METHODDECLARINGCLASS` VARCHAR(1024) NOT NULL,
  `METHODNAME` VARCHAR(1024) NOT NULL,
  `METHODSIGNATURE` VARCHAR(2048) NOT NULL,
  `ARGS` LONGTEXT,
  PRIMARY KEY (`ADAPTERID`,`WORKFLOWID`,`ENTITYID`),
  KEY `COP_IDX_ADAPTERCALL` (`ADAPTERID`,`PRIORITY`)
) ENGINE=INNODB DEFAULT CHARSET=UTF8;

-- DATA EXPORTING WAS UNSELECTED.
-- DUMPING STRUCTURE FOR TABLE COPPERDEMO.COP_AUDIT_TRAIL_EVENT
DROP TABLE IF EXISTS `COP_AUDIT_TRAIL_EVENT`;
CREATE TABLE IF NOT EXISTS `COP_AUDIT_TRAIL_EVENT` (
  `SEQ_ID` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `OCCURRENCE` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `CONVERSATION_ID` VARCHAR(64) NOT NULL,
  `LOGLEVEL` TINYINT(4) NOT NULL,
  `CONTEXT` VARCHAR(128) NOT NULL,
  `INSTANCE_ID` VARCHAR(128) DEFAULT NULL,
  `CORRELATION_ID` VARCHAR(128) DEFAULT NULL,
  `TRANSACTION_ID` VARCHAR(128) DEFAULT NULL,
  `LONG_MESSAGE` LONGTEXT,
  `MESSAGE_TYPE` VARCHAR(256) DEFAULT NULL,
  PRIMARY KEY (`SEQ_ID`)
) ENGINE=INNODB AUTO_INCREMENT=114044 DEFAULT CHARSET=UTF8;

-- DATA EXPORTING WAS UNSELECTED.
-- DUMPING STRUCTURE FOR TABLE COPPERDEMO.COP_LOCK
DROP TABLE IF EXISTS `COP_LOCK`;
CREATE TABLE IF NOT EXISTS `COP_LOCK` (
  `LOCK_ID` VARCHAR(128) NOT NULL,
  `CORRELATION_ID` VARCHAR(128) NOT NULL,
  `WORKFLOW_INSTANCE_ID` VARCHAR(128) NOT NULL,
  `INSERT_TS` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `REPLY_SENT` CHAR(1) NOT NULL,
  PRIMARY KEY (`LOCK_ID`,`WORKFLOW_INSTANCE_ID`)
) ENGINE=INNODB DEFAULT CHARSET=UTF8;

-- DATA EXPORTING WAS UNSELECTED.
-- DUMPING STRUCTURE FOR TABLE COPPERDEMO.COP_QUEUE
DROP TABLE IF EXISTS `COP_QUEUE`;
CREATE TABLE IF NOT EXISTS `COP_QUEUE` (
  `PPOOL_ID` VARCHAR(32) NOT NULL,
  `PRIORITY` TINYINT(4) NOT NULL,
  `LAST_MOD_TS` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `WORKFLOW_INSTANCE_ID` VARCHAR(128) NOT NULL,
  `ENGINE_ID` VARCHAR(16) NULL,
  PRIMARY KEY (`WORKFLOW_INSTANCE_ID`)
) ENGINE=INNODB DEFAULT CHARSET=UTF8;

-- DATA EXPORTING WAS UNSELECTED.
-- DUMPING STRUCTURE FOR TABLE COPPERDEMO.COP_RESPONSE
DROP TABLE IF EXISTS `COP_RESPONSE`;
CREATE TABLE IF NOT EXISTS `COP_RESPONSE` (
  `RESPONSE_ID` VARCHAR(128) NOT NULL,
  `CORRELATION_ID` VARCHAR(128) NOT NULL,
  `RESPONSE_TS` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `RESPONSE` MEDIUMTEXT,
  `RESPONSE_TIMEOUT` TIMESTAMP NULL DEFAULT NULL,
  `RESPONSE_META_DATA` VARCHAR(4000) DEFAULT NULL,
  PRIMARY KEY (`RESPONSE_ID`),
  KEY `IDX_COP_RESP_CID` (`CORRELATION_ID`)
) ENGINE=INNODB DEFAULT CHARSET=UTF8;

-- DATA EXPORTING WAS UNSELECTED.
-- DUMPING STRUCTURE FOR TABLE COPPERDEMO.COP_WAIT
DROP TABLE IF EXISTS `COP_WAIT`;
CREATE TABLE IF NOT EXISTS `COP_WAIT` (
  `CORRELATION_ID` VARCHAR(128) NOT NULL,
  `WORKFLOW_INSTANCE_ID` VARCHAR(128) NOT NULL,
  `MIN_NUMB_OF_RESP` SMALLINT(6) NOT NULL,
  `TIMEOUT_TS` TIMESTAMP NULL DEFAULT NULL,
  `STATE` TINYINT(4) NOT NULL,
  `PRIORITY` TINYINT(4) NOT NULL,
  `PPOOL_ID` VARCHAR(32) NOT NULL,
  PRIMARY KEY (`CORRELATION_ID`),
  KEY `IDX_COP_WAIT_WFI_ID` (`WORKFLOW_INSTANCE_ID`)
) ENGINE=INNODB DEFAULT CHARSET=UTF8;

-- DATA EXPORTING WAS UNSELECTED.
-- DUMPING STRUCTURE FOR TABLE COPPERDEMO.COP_WORKFLOW_INSTANCE
DROP TABLE IF EXISTS `COP_WORKFLOW_INSTANCE`;
CREATE TABLE IF NOT EXISTS `COP_WORKFLOW_INSTANCE` (
  `ID` VARCHAR(128) NOT NULL,
  `STATE` TINYINT(4) NOT NULL COMMENT 'ENQUEUED-0,PROCESSING-1,WAITING-2,FINISHED-3,INVALID-4,ERROR-5',
  `PRIORITY` TINYINT(4) NOT NULL,
  `LAST_MOD_TS` TIMESTAMP NULL DEFAULT NULL,
  `PPOOL_ID` VARCHAR(32) NOT NULL,
  `DATA` MEDIUMTEXT,
  `OBJECT_STATE` MEDIUMTEXT,
  `CS_WAITMODE` TINYINT(4) DEFAULT NULL,
  `MIN_NUMB_OF_RESP` SMALLINT(6) DEFAULT NULL,
  `NUMB_OF_WAITS` SMALLINT(6) DEFAULT NULL,
  `TIMEOUT` TIMESTAMP NULL DEFAULT NULL,
  `CREATION_TS` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `CLASSNAME` VARCHAR(512) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=INNODB DEFAULT CHARSET=UTF8;

-- DATA EXPORTING WAS UNSELECTED.
-- DUMPING STRUCTURE FOR TABLE COPPERDEMO.COP_WORKFLOW_INSTANCE_ERROR
DROP TABLE IF EXISTS `COP_WORKFLOW_INSTANCE_ERROR`;
CREATE TABLE IF NOT EXISTS `COP_WORKFLOW_INSTANCE_ERROR` (
  `WORKFLOW_INSTANCE_ID` VARCHAR(128) NOT NULL,
  `EXCEPTION` TEXT NOT NULL,
  `ERROR_TS` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  KEY `IDX_COP_WFID_WFID` (`WORKFLOW_INSTANCE_ID`)
) ENGINE=INNODB DEFAULT CHARSET=UTF8;
